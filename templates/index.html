<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SouthWest Innovation Lab</title>
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/font-awesome/css/font-awesome.css" rel="stylesheet">

    <link href="/static/css/animate.css" rel="stylesheet">
    <link href="/static/css/style.css" rel="stylesheet">

    <link href="/static/css/plugins/iCheck/custom.css" rel="stylesheet">

    <link href="/static/css/plugins/fullcalendar/fullcalendar.css" rel="stylesheet">
    <link href="/static/css/plugins/fullcalendar/fullcalendar.print.css" rel='stylesheet' media='print'>

</head>

<body>
    <div id="wrapper">
        <nav class="navbar-default navbar-static-side" role="navigation">
        <div class="sidebar-collapse">
            <ul class="nav metismenu" id="side-menu">
                <li class="nav-header">
                    <div class="dropdown profile-element">
                    	<span><img alt="image" class="img-circle" src="/static/img/profile_small.jpg" /></span>
                        <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                            <span class="clear"> <span class="block m-t-xs"> <strong class="font-bold">Einsgate Wong</strong>
                             </span> <span class="text-muted text-xs block">Project Manager<b class="caret"></b></span> </span> </a>
                        <ul class="dropdown-menu animated fadeInRight m-t-xs">
                            <li><a href="profile.html">Profile</a></li>
                            <li><a href="contacts.html">Contacts</a></li>
                            <li><a href="mailbox.html">Mailbox</a></li>
                            <li class="divider"></li>
                            <li><a href="login.html">Logout</a></li>
                        </ul>
                    </div>
                    <div class="logo-element">
                        SwIRL
                    </div>
                </li>
                <li class="active">
                    <a href="index"><i class="fa fa-th-large"></i> <span class="nav-label">Overall</span></a>
                </li>
                <li>
                    <a href="layouts.html"><i class="fa fa-diamond"></i> <span class="nav-label">User Management</span><span class="fa arrow"></span></a>
                    <ul class="nav nav-second-level">
                        <li class="active"><a href="roleList">Role Management</a></li>
                        <li><a href="staffList">Staff Management</a></li>
                        <li><a href="teamLeaderList">Leader Management</a></li>
                        <li><a href="memberList">Member Management</a></li>
                    </ul>                    
                </li>
                <li>
                    <a href="#"><i class="fa fa-bar-chart-o"></i> <span class="nav-label">Statistics</span><span class="fa arrow"></span></a>
                    <ul class="nav nav-second-level collapse">
                        <li><a href="graph_morris.html">Overall</a></li>
                        <li><a href="graph_rickshaw.html">Space Reserve Statistics</a></li>
                        <li><a href="graph_chartjs.html">Training Statistics</a></li>
                        <li><a href="graph_chartist.html">Register Statistics</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#"><i class="fa fa-pie-chart"></i> <span class="nav-label">Space Reserve</span> <span class="fa arrow"></span></a>
                    <ul class="nav nav-second-level collapse">
                        <li><a href="spaceLayout">Layout</a></li>
                        <li><a href="calendar.html">Reserve Space</a></li>
                        <li><a href="reserveList">Reserve List</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#"><i class="fa fa-flask"></i> <span class="nav-label">Team Management</span> <span class="fa arrow"></span> </a>
                    <ul class="nav nav-second-level collapse">
                        <li><a href="teams_board.html">Team List</a></li>
                        <li><a href="applyTeam">Apply Team</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#"><i class="fa fa-edit"></i> <span class="nav-label">Training Management</span><span class="fa arrow"></span></a>
                    <ul class="nav nav-second-level collapse">
                        <li><a href="projects.html">Training List</a></li>
                        <li><a href="applyTraining">Apply Training</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#"><i class="fa fa-desktop"></i> <span class="nav-label">Task Management</span></a>
                    <ul class="nav nav-second-level collapse">
                        <li><a href="projects.html">Task List</a></li>
                        <li><a href="profile.html">Create Task</a></li>
                        <li><a href="timeline.html">Tracking Task</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </nav>
        <div id="page-wrapper" class="gray-bg" style="min-height: 1702.06px;">
            <div class="row border-bottom">
            <nav class="navbar navbar-static-top white-bg" role="navigation" style="margin-bottom: 0">
            <div class="navbar-header">
                <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i class="fa fa-bars"></i> </a>
            </div>
                <ul class="nav navbar-top-links navbar-right">
                    <li>
                        <span class="m-r-sm text-muted welcome-message">Welcome to SouthWest Innovation Lab SharedSpace.</span>
                    </li>
                    <li>
                        <a href="login.html">
                            <i class="fa fa-sign-out"></i> Log out
                        </a>
                    </li>
                </ul>
            </nav>
    
            </div>
            <div class="wrapper wrapper-content">
                <div class="row animated fadeInDown">
                    <div class="col-lg-12">
                        <div class="ibox float-e-margins">
                            <div class="ibox-title">
                                <h5>Layout</h5>
                            </div>
                            <div class="ibox-content">
                                <img src="/static/img/layout.jpg" alt="layout">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row animated fadeInDown">
                    <div class="col-lg-3">
                        <div class="ibox float-e-margins">
                            <div class="ibox-title">
                                <h5>Space</h5>
                                <div class="ibox-tools">
                                    <a class="collapse-link">
                                        <i class="fa fa-chevron-up"></i>
                                    </a>
                                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                        <i class="fa fa-wrench"></i>
                                    </a>
                                    <ul class="dropdown-menu dropdown-user">
                                        <li><a href="#">Choice 1</a>
                                        </li>
                                        <li><a href="#">Choice 2</a>
                                        </li>
                                    </ul>
                                    <a class="close-link">
                                        <i class="fa fa-times"></i>
                                    </a>
                                </div>
                            </div>
                            <div class="ibox-content">
                                <div id="external-events">
                                    <p>Drag an event and enter the calendar.</p>
                                    
                                    <div class="external-event navy-bg ui-draggable ui-draggable-handle" style="position: relative; text-align: center; z-index: auto; left: 0px; top: 0px; background-color: #f8ac59;" data-color='#f8ac59'>Zone 1</div>
                                    <div class="external-event navy-bg ui-draggable ui-draggable-handle" style="position: relative; text-align: center; background-color: #f8ac59;" data-color='#f8ac59'>Zone 2</div>
                                    <div class="external-event navy-bg ui-draggable ui-draggable-handle" style="position: relative; text-align: center; background-color: #f8ac59;" data-color='#f8ac59'>Zone 3</div>
                                    <div class="external-event navy-bg ui-draggable ui-draggable-handle" style="position: relative; text-align: center; background-color: #f8ac59;" data-color='#f8ac59'>Zone 4</div>
                                    <div class="external-event navy-bg ui-draggable ui-draggable-handle" style="position: relative; text-align: center; background-color: #f8ac59;" data-color='#f8ac59'>Zone 5</div>
                                </div>
                            </div>
                        </div>
                        <div class="ibox float-e-margins">
                            <div class="ibox-title">
                                <h5>Reservation</h5>
                                <div class="ibox-tools">
                                    <a class="collapse-link">
                                        <i class="fa fa-chevron-up"></i>
                                    </a>
                                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                        <i class="fa fa-wrench"></i>
                                    </a>
                                    <ul class="dropdown-menu dropdown-user">
                                        <li><a href="#">Short-Term Reservation</a>
                                        </li>
                                        <li><a href="#">Long-Term Reservation</a>
                                        </li>
                                    </ul>
                                    <a class="close-link">
                                        <i class="fa fa-times"></i>
                                    </a>
                                </div>
                            </div>
                            <div class="ibox-content">
                                <form role="form" id="reserve-form">
                                    <div class="form-group"><label>Title</label> <input type="text" class="form-control" id="reserve-title"></div>
                                    <div class="hr-line-dashed"></div>
                                    <div class="form-group">
                                        <label>Type</label> 
                                        <select class="form-control m-b" id="reserve-type">
                                            <option>closed</option>
                                            <option>quiet</option>
                                            <option>open</option>
                                        </select>
                                    </div>
                                    <div class="hr-line-dashed"></div>
                                    <div class="form-group"><label>Description</label> <textarea class="form-control" rows="5" id="reserve-description"></textarea> </div>
                                    <div class="hr-line-dashed"></div>
                                    <div class="form-group">
                                        <button class="btn btn-primary" type="submit" id="reserve-button">Submit</button>
                                        <button class="btn btn-white pull-right" type="submit">Reset</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-9">
                        <div class="ibox float-e-margins">
                            <div class="ibox-title">
                                <h5>Reserve Calendar </h5>
                                <div class="ibox-tools">
                                    <a class="collapse-link">
                                        <i class="fa fa-chevron-up"></i>
                                    </a>
                                    <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                                        <i class="fa fa-wrench"></i>
                                    </a>
                                    <ul class="dropdown-menu dropdown-user">
                                        <li><a href="#">Choice 1</a>
                                        </li>
                                        <li><a href="#">Choice 2</a>
                                        </li>
                                    </ul>
                                    <a class="close-link">
                                        <i class="fa fa-times"></i>
                                    </a>
                                </div>
                            </div>
                            <div class="ibox-content">
                                <div id="calendar"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="footer">
                <div class="pull-right">
                    10GB of <strong>250GB</strong> Free.
                </div>
                <div>
                    <strong>Copyright</strong> Example Company &copy; 2014-2017
                </div>
            </div>
        </div>

    </div>

    <!-- Mainly scripts -->
    <script src="/static/js/jquery-3.1.1.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="/static/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
    
    <script src="/static/js/plugins/fullcalendar/moment.min.js"></script>
    
    <!-- Flot -->
    <script src="/static/js/plugins/flot/jquery.flot.js"></script>
    <script src="/static/js/plugins/flot/jquery.flot.tooltip.min.js"></script>
    <script src="/static/js/plugins/flot/jquery.flot.spline.js"></script>
    <script src="/static/js/plugins/flot/jquery.flot.resize.js"></script>
    <script src="/static/js/plugins/flot/jquery.flot.pie.js"></script>
    <script src="/static/js/plugins/flot/jquery.flot.symbol.js"></script>
    <script src="/static/js/plugins/flot/jquery.flot.time.js"></script>
    <!-- Custom and plugin javascript -->
    <script src="/static/js/inspinia.js"></script>
    <script src="/static/js/plugins/pace/pace.min.js"></script>
    <!-- Sparkline -->
    <script src="/static/js/plugins/sparkline/jquery.sparkline.min.js"></script>

    <script>
        $(document).ready(function() {

            var sparklineCharts = function(){
                $("#sparkline1").sparkline([34, 43, 43, 35, 44, 32, 44, 52], {
                    type: 'line',
                    width: '100%',
                    height: '50',
                    lineColor: '#1ab394',
                    fillColor: "transparent"
                });

                $("#sparkline2").sparkline([32, 11, 25, 37, 41, 32, 34, 42], {
                    type: 'line',
                    width: '100%',
                    height: '50',
                    lineColor: '#1ab394',
                    fillColor: "transparent"
                });

                $("#sparkline3").sparkline([34, 22, 24, 41, 10, 18, 16,8], {
                    type: 'line',
                    width: '100%',
                    height: '50',
                    lineColor: '#1C84C6',
                    fillColor: "transparent"
                });
            };

            var sparkResize;

            $(window).resize(function(e) {
                clearTimeout(sparkResize);
                sparkResize = setTimeout(sparklineCharts, 500);
            });

            sparklineCharts();

            var data1 = [
                [0,4],[1,8],[2,5],[3,10],[4,4],[5,16],[6,5],[7,11],[8,6],[9,11],[10,20],[11,10],[12,13],[13,4],[14,7],[15,8],[16,12]
            ];
            var data2 = [
                [0,0],[1,2],[2,7],[3,4],[4,11],[5,4],[6,2],[7,5],[8,11],[9,5],[10,4],[11,1],[12,5],[13,2],[14,5],[15,2],[16,0]
            ];
            $("#flot-dashboard5-chart").length && $.plot($("#flot-dashboard5-chart"), [
                        data1,  data2
                    ],
                    {
                        series: {
                            lines: {
                                show: false,
                                fill: true
                            },
                            splines: {
                                show: true,
                                tension: 0.4,
                                lineWidth: 1,
                                fill: 0.4
                            },
                            points: {
                                radius: 0,
                                show: true
                            },
                            shadowSize: 2
                        },
                        grid: {
                            hoverable: true,
                            clickable: true,

                            borderWidth: 2,
                            color: 'transparent'
                        },
                        colors: ["#1ab394", "#1C84C6"],
                        xaxis:{
                        },
                        yaxis: {
                        },
                        tooltip: false
                    }
            );

        });
    </script>
    
    <!-- jQuery UI  -->
    <script src="/static/js/plugins/jquery-ui/jquery-ui.min.js"></script>

    <!-- iCheck -->
    <script src="/static/js/plugins/iCheck/icheck.min.js"></script>

    <!-- Full Calendar -->
    <script src="/static/js/plugins/fullcalendar/fullcalendar.min.js"></script>

    <script>
        $(document).ready(function() {

            /* initialize the external events
             -----------------------------------------------------------------*/


            $('#external-events div.external-event').each(function() {

                // store data so the calendar knows to render an event upon drop
                $(this).data('event', {
                    id: "new-event", 
                    title: $.trim($(this).text()), // use the element's text as the event title
                    stick: true, // maintain when user navigates (see docs on the renderEvent method)
                    color: $(this).data('color'), 
                    editable: true
                });

                // make the event draggable using jQuery UI
                $(this).draggable({
                    zIndex: 1111999,
                    revert: true, // will cause the event to go back to its
                    revertDuration: 0 //  original position after the drag
                });

            });


            /* initialize the calendar
             -----------------------------------------------------------------*/
            var date = new Date();
            var d = date.getDate();
            var m = date.getMonth();
            var y = date.getFullYear();

            $('#calendar').fullCalendar({
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,agendaWeek,agendaDay'
                },
                editable: false,
                droppable: true, // this allows things to be dropped onto the calendar
                events: [{
                    title: 'zone 1',
                    start: new Date(y, m, 1)
                }, {
                    title: 'zone 2',
                    start: new Date(y, m, d - 5),
                    end: new Date(y, m, d - 2)
                }, {
                    id: 999,
                    title: 'zone 3',
                    start: new Date(y, m, d - 3, 16, 0),
                    allDay: false
                }, {
                    id: 999,
                    title: 'zone 3',
                    start: new Date(y, m, d + 4, 16, 0),
                    allDay: false
                }, {
                    title: 'zone 4',
                    start: new Date(y, m, d, 10, 30),
                    allDay: false
                }, {
                    title: 'zone 5',
                    start: new Date(y, m, d + 1, 19, 0),
                    end: new Date(y, m, d + 1, 22, 30),
                    allDay: false
                }, {
                    title: 'zone 6',
                    start: new Date(y, m, 28),
                    end: new Date(y, m, 29),
                    url: 'http://google.com/'
                }], 
                eventColor: '#1ab394', 
                
                eventRender: function ( event, element ) {
                    element.attr( 'id', event.id );
                }, 
                
            });


        });
    </script>
    <script type="text/javascript">
        var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");
        document.write(unescape("%3Cspan id='cnzz_stat_icon_1278138285'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/z_stat.php%3Fid%3D1278138285%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));
    </script>
    
    <script>
        $("#reserve-form").on("submit", function(){

            var reserve_title = document.getElementById("reserve-title").value;
            var reserve_type = document.getElementById("reserve-type").selectedIndex;
            var reserve_desc = document.getElementById("reserve-description").value;
            
            var reserve_events = $('#calendar').fullCalendar( 'clientEvents', ['new-event'])
            
            if (reserve_events.length > 1) {
                alert("You make more than one reservations!");
                location.reload(true);
                return;
            }
            if (reserve_events.length == 0) {
                alert("You haven't made any reservations!");
                location.reload(true);
                return;
            }
                
            var reserve_event = reserve_events[0];
            
            if (reserve_event.allDay) {
                alert("You should specify the start time and end time!");
                return;
            }
            
            var reserve_zone_id = (reserve_event.title).replace(/[^0-9]/ig,"");
            var reserve_start_time = new Date(reserve_event.start.toISOString());
            var reserve_end_time;
            
            if (reserve_event.end == null) {
                reserve_end_time = new Date(reserve_event.start.toISOString());
                reserve_end_time.setHours(reserve_start_time.getHours() + 2);
            } else {
                reserve_end_time = new Date(reserve_event.end.toISOString());
            }
            
            var reserve_user_id = 1;
            
            window.confirm( reserve_title + ' at ' + reserve_event.title + ' from ' + reserve_start_time.toLocaleString() + ' to ' + reserve_end_time.toLocaleString() + '?');
            
            $.ajax({
                url: '{% url "reservation_create" %}',
                type: "POST",
                data: JSON.stringify({ 
                    title: reserve_title,  
                    reservation_type: reserve_type, 
                    description: reserve_desc, 
                    zone_id: reserve_zone_id, 
                    start_time: reserve_start_time, 
                    end_time: reserve_end_time, 
                    user_id: reserve_user_id
                }),
                success: function(data) {
                    console.log(data);
                    if (data.error_code == 0) {
                        alert("SUCCESS");
                    } else {
                        alert("Oops! We have encountered an error " + data.error_msg + "!");
                    }
                },
           });

       });
    </script>

</body>
</html>
