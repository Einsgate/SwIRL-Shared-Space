<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Southwest Innovation Research Lab - Reservation History</title>
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/font-awesome/css/font-awesome.css" rel="stylesheet">
    <!-- FooTable -->
    <link href="/static/css/plugins/footable/footable.core.css" rel="stylesheet">
    <link href="/static/css/animate.css" rel="stylesheet">
    <link href="/static/css/style.css" rel="stylesheet">
    <link href="/static/css/plugins/sweetalert/sweetalert.css" rel="stylesheet">
</head>

<body>
    <div id="wrapper">
		{% include 'common/nav.html' %}
        <div id="page-wrapper" class="gray-bg">
	
	        {% include 'common/logout.html' %}
	        
	        <div class="row wrapper border-bottom white-bg page-heading">
	            <div class="col-lg-10">
	                <h2>Staff Index</h2>
	                <ol class="breadcrumb">
	                    <li>
	                        <a href="index.html">Home</a>
	                    </li>
	                    <li>
	                        <a>Staff Management</a>
	                    </li>
	                    <li class="active">
	                        <strong>Staff Index</strong>
	                    </li>
	                </ol>
	            </div>
	            <div class="col-lg-2">
	
	            </div>
	        </div>
	
	        <div class="wrapper wrapper-content animated fadeInRight ecommerce">
	<!-- 
	            <div class="ibox-content m-b-sm border-bottom">
	                <div class="row">
	                    <div class="col-sm-4">
	                        <div class="form-group">
	                            <label class="control-label" for="order_id">Team Name</label>
	                            <input type="text" id="order_id" name="order_id" value="" placeholder="Order ID" class="form-control">
	                        </div>
	                    </div>
	                    <div class="col-sm-4">
	                        <div class="form-group">
	                            <label class="control-label" for="status">Reserve status</label>
	                            <input type="text" id="status" name="status" value="" placeholder="Status" class="form-control">
	                        </div>
	                    </div>
	                    <div class="col-sm-4">
	                        <div class="form-group">
	                            <label class="control-label" for="customer">Zone Name</label>
	                            <input type="text" id="customer" name="customer" value="" placeholder="Customer" class="form-control">
	                        </div>
	                    </div>
	                </div>
	            </div>
	-->
	            <div class="row">
	                <div class="col-lg-12">
	                    <div class="ibox">
	                        <div class="ibox-content">
	
	                            <table class="footable table table-stripped toggle-arrow-tiny" data-page-size="15">
	                                <thead>
		                                <tr>
		                                    <th data-toggle="true">ID</th>
		                                    <th data-hide="phone">Staff Name</th>
		                                    <th data-hide="all">Email</th>
		                                    <th data-hide="phone">Join Time</th>
		                                    <th data-hide="phone">Last Login</th>
		                                    <th class="text-right">Action</th>
		                                </tr>
	                                </thead>
	                                <tbody id="reserveList">
	                                	{% for staff in staff_list %}  
		                                <tr id="userId_{{staff.id}}">
		                                    <td>{{staff.id}}</td>
		                                    <td>{{staff.username}}</td>
		                                    <td>{{staff.email}}</td>
		                                    <td>{{staff.date_joined}}</td>
		                                    <td>{{staff.last_login}}</td>
		                                    <td class="text-right">
		                                        <div class="btn-group">
		                                            <button id="deleteSubmit" onclick="deleteItem('{{staff.id}}')" class="btn btn-danger btn-sm deleteSubmit">Delete</button>
		                                        </div>
		                                    </td>
		                                </tr>
										{% endfor %}
									  </tbody>
	                                <tfoot>
	                                <tr>
	                                    <td colspan="9">
	                                        <ul class="pagination pull-right"></ul>
	                                    </td>
	                                </tr>
	                                </tfoot>
	                            </table>
	                        </div>
	                    </div>
	                </div>
	            </div>
	        </div>

	        <div class="footer">
				{% include 'common/footer.html' %}
	        </div>

        </div>
        </div>

    <!-- Mainly scripts -->
    <script src="/static/js/jquery-3.1.1.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="/static/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

    <!-- Custom and plugin javascript -->
    <script src="/static/js/inspinia.js"></script>
    <script src="/static/js/plugins/pace/pace.min.js"></script>

    <!-- Sweet alert -->
    <script src="/static/js/plugins/sweetalert/sweetalert.min.js"></script>

    <!-- FooTable -->
    <script src="/static/js/plugins/footable/footable.all.min.js"></script>

    <!-- Page-Level Scripts -->
	<script>
		function deleteItem(id) {
			swal({
                title: "Move this user to Member ?",
                text: "You can recover this record at Authority User! ",
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: "#DD6B55",
                confirmButtonText: "Yes, Do it!",
                cancelButtonText: "No, Cancel!",
                closeOnConfirm: false,
                closeOnCancel: false },
            function (isConfirm) {
           		if(isConfirm){
           	        $.ajax({
           	            url:'{% url "authority_update" %}',
           	            data:{userId: id, roleId: 3},
                        type: "GET",
           	            success:function(msg){
           	            	$(location).attr('href','{% url "staff_index" %}');
           	            },
           	            error:function(xhr,textstatus,thrown){
           	            }
           	        });
           	        //swal("Deleted!", "Your record has been DELETED.", "success");
           		}else{
           			swal("Cancelled", "Your record is safe :)", "error");
           		}
            });
		}

	</script>

    <!-- Page-Level Scripts -->
    <script>
        $(document).ready(function() {
            $('.footable').footable();
        });
    </script>

</body>

</html>
