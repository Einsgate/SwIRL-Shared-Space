<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Southwest Innovation Research Lab - Team Details</title>
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/font-awesome/css/font-awesome.css" rel="stylesheet">
    <!-- FooTable -->
    <link href="/static/css/plugins/footable/footable.core.css" rel="stylesheet">
    <link href="/static/css/animate.css" rel="stylesheet">
    <link href="/static/css/style.css" rel="stylesheet">
    <link href="/static/css/plugins/datapicker/datepicker3.css" rel="stylesheet">
</head>

<body>
    <div id="wrapper">
		{% include 'common/nav.html' %}
        <div id="page-wrapper" class="gray-bg">

        <div class="row border-bottom">
        <nav class="navbar navbar-static-top" role="navigation" style="margin-bottom: 0">
        <div class="navbar-header">
            <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i class="fa fa-bars"></i> </a>
            <form role="search" class="navbar-form-custom" action="search_results.html">
                <div class="form-group">
                    <input type="text" placeholder="Search for something..." class="form-control" name="top-search" id="top-search">
                </div>
            </form>
        </div>
        <ul class="nav navbar-top-links navbar-right">
             <li>
                 <span class="m-r-sm text-muted welcome-message">Welcome to Southwest Innovation Research Lab Shared Space.</span>
             </li>
             <li>
                 <a >
                     <i class="fa fa-sign-out"></i> Log out
                 </a>
             </li>
         </ul>

        </nav>
        </div>
        
        
        
        <div class="row wrapper border-bottom white-bg page-heading">
            <div class="col-lg-10">
                <h2>Team Details</h2>
                <ol class="breadcrumb">
                    <li>
                        <a href="../index.html">Home</a>
                    </li>
                    <li class="active">
                         <a href="../../list">Team List</a>
                    </li>
                    
                    <li class="active">
                        <strong>Team Details</strong>
                    </li>
                </ol>
            </div>
            <div class="col-lg-2">
            </div>
        </div>

        <div class="wrapper wrapper-content animated fadeInRight ecommerce">
            <div class="row">
                <div class="col-lg-12">
                    <div class="ibox">
                        <div class="ibox-content">
                            <form role="form" id="team-details-form">
                                <div class="form-group">
                                    <label>Leader</label>
                                    <input type="text" disabled="" placeholder="{{request.user.username}}" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>Team name</label>
                                    <input type="text" value="{{team.name}}" id="new-team-name" class="form-control">
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <button class="btn btn-primary pull-right" type="button" id="team-detail-save-button" onclick="save_update({{team.id}}, {{team.name}})" style="align: right">Save</button> 
                </div>
            </div>

        </div>
        <div class="footer">
			{% include 'common/footer.html' %}
        </div>

        </div>
        </div>

    <!-- Mainly scripts -->
    <script src="/static/js/jquery-3.1.1.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="/static/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

    <!-- Custom and plugin javascript -->
    <script src="/static/js/inspinia.js"></script>
    <script src="/static/js/plugins/pace/pace.min.js"></script>

    <!-- Data picker -->
    <script src="/static/js/plugins/datapicker/bootstrap-datepicker.js"></script>

    <!-- FooTable -->
    <script src="/static/js/plugins/footable/footable.all.min.js"></script>

    <!-- Page-Level Scripts -->
    <!-- Mainly scripts -->
    <script src="/static/js/jquery-3.1.1.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="/static/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

    <!-- Custom and plugin javascript -->
    <script src="/static/js/inspinia.js"></script>
    <script src="/static/js/plugins/pace/pace.min.js"></script>

    <!-- FooTable -->
    <script src="/static/js/plugins/footable/footable.all.min.js"></script>
    
    <script>
    // [TODO]: need to add the team members.
        function save_update(id, old_name) {
            var team_name_ele = document.getElementById("new-team-name");
            var new_name = team.name;
            
            if(!confirm('Confirmed?')){
		        return false;
			}
            
            $.ajax({
                url: 'update',
                type: "POST",
                data: JSON.stringify({ 
                    id: id, 
                    name: new_name,
                }),
                success: function(data) {
                    console.log(data);
                    if (data.error_code == 0) {
                        alert("SUCCESS");
                        ret = true;
                    } else {
                        alert("Oops! We have encountered an error " + data.error_msg + "!");
                        ret = false;
                    }
                    
                    window.location.reload();
                },
            });
        }
    </script>

</body>

</html>
